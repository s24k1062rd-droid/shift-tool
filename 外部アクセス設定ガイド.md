# 🌐 外部アクセス設定ガイド（簡易版）

## 📱 スマホや他のPCからアクセスする方法

インターネット経由でどこからでもシフト作成ツールにアクセスできるようにします。

---

## 🚀 最も簡単な方法

### ステップ1: ngrokアカウント作成（3分・無料）

1. https://ngrok.com/signup にアクセス
2. Googleアカウントまたはメールでサインアップ（無料）
3. ログインすると、ダッシュボードに「Your Authtoken」が表示されます

### ステップ2: Authtokenを設定（1分）

⚠️ **重要**: `< >` は入力しません。ダッシュボードに表示されたトークンをそのままコピーして貼り付けてください。

表示されたauthtokenをコピーして、以下のコマンドを実行：

```powershell
ngrok config add-authtoken 実際に表示されたトークン
```

例（実際のトークンに置き換えてください）:
```powershell
ngrok config add-authtoken 2ab1cXXXXXXXXXXXXXXXXXXX_5fgHJKLMNOPQRSTUVWXYZ
```

### ステップ3: 起動

**start_external.bat** をダブルクリック

または、コマンドで：

```powershell
.\.venv\Scripts\python.exe app_external.py
```

### ステップ4: URLをコピーしてアクセス

ターミナルに表示される URL（例: `https://abc123.ngrok-free.app`）をスマホやPCのブラウザで開く

✅ 完了！

---

## 🔧 代替方法（認証不要）

ngrokの設定が面倒な場合は、**start_localhostrun.bat** を使用してください：

```bat
start_localhostrun.bat
```

こちらは認証不要ですが、URLが少し長くなります。

---

## 📊 各方法の比較

| 方法 | 認証 | 安定性 | URL | 推奨度 |
|------|------|--------|-----|---------|
| **ngrok** | 必要（無料） | ⭐⭐⭐⭐⭐ | 短い | ✅ 推奨 |
| **localhost.run** | 不要 | ⭐⭐⭐⭐ | 長い | 〇 簡単 |
| **Cloudflare** | 複雑 | ⭐⭐⭐⭐⭐ | 短い | △ 上級者向け |

---

## ❓ よくある質問

**Q: URLは毎回変わりますか？**
- A: はい。無料版では毎回変わります。固定URLが必要な場合は、ngrokの有料プラン($8/月〜)が必要です。

**Q: セキュリティは大丈夫？**
- A: はい。HTTPS暗号化されています。ただし、URLを知っている人は誰でもアクセスできるので、URLは信頼できる人にのみ共有してください。

**Q: 無料で使えますか？**
- A: はい。ngrokもlocalhost.runも無料で使用できます。

**Q: スマホからちゃんと使えますか？**
- A: はい。レスポンシブデザインなので、スマホ・タブレット・PCどれでも快適に使用できます。

**Q: 同時に何人までアクセスできますか？**
- A: ngrok無料版では同時アクセス数に制限がありますが、シフト入力程度の用途なら十分です（目安：10人程度まで）。

---

## 🛠️ トラブルシューティング

### エラー: "authentication failed"

→ ngrok authtokenが設定されていません。上記ステップ2を実行してください

### エラー: "SSHが見つかりません"

→ Windows 10/11の場合：
1. 設定 > アプリ > オプション機能
2. 「OpenSSH クライアント」を追加

または、ngrok版を使用してください

### URLにアクセスできない

→ 以下を確認：
1. ツールが起動しているか確認
2. 正しいURL（https://で始まる）をコピーしているか確認
3. Wi-FiまたはモバイルデータがONか確認

---

## 📝 起動スクリプト一覧

| ファイル | 説明 |
|----------|------|
| `run.bat` | ローカル専用（LAN内のみ） |
| `start_external.bat` | **外部アクセス版（ngrok・推奨）** |
| `start_localhostrun.bat` | 外部アクセス版（認証不要） |
| `start_ngrok.bat` | ngrok版（app.py別起動） |

---

## 💡 おすすめの運用方法

1. **初回セットアップ**: ngrok authtokenを一度設定（3分）
2. **日常使用**: `start_external.bat` をダブルクリックするだけ
3. **URL共有**: 表示されたURLをLINEやメールでスタッフに送信
4. **終了時**: Ctrl+C で終了

---

## 📞 サポート

問題が解決しない場合は、以下の情報をメモしてください：
- 使用しているOS（Windows 10/11）
- エラーメッセージの全文
- 実行したコマンド

